# Quick Start Guide - Bug Tracking System

## Installation Steps

### 1. Apply Database Migration
```bash
# The migration file is already created
# Apply it to your Supabase project:

# File location:
supabase/migrations/20251118120000_create_bug_tracking_system.sql

# This will create 3 tables:
# - bugs
# - business_issues
# - employee_tasks
```

### 2. Add to Navigation (In MainApp.tsx)
```typescript
// Add to admin navigation items:
{
  label: 'Bug Management',
  icon: Bug,
  component: <BugManagement />,
  roles: ['admin']
}
```

### 3. Import Component
```typescript
import { BugManagement } from './components/Admin/BugManagement';
```

---

## Using the Bug Management System

### Reporting a Bug
1. Click "Report Bug" button
2. Fill in required fields:
   - **Title**: Short description
   - **Description**: Detailed explanation
   - **Expected Behaviour**: What should happen
   - **Actual Behaviour**: What actually happens
   - **User Type**: Admin/Business/Employee
   - **Module**: Which system module
   - **Priority**: Low/Medium/High/Critical
   - **Screenshots**: Upload multiple images
3. Click "Submit"

### Managing Bugs
- **Search**: Use search bar to find specific bugs
- **Filter**: Filter by status, priority, user type, module
- **Assign**: Select employee from dropdown
- **Update Status**: Change status to In Progress/Resolved
- **View Details**: Click to see full bug information

### Bug Workflow
```
Pending ‚Üí In Progress ‚Üí Resolved
                     ‚Üì
                  Rejected
                     ‚Üì
                  Reopened
```

---

## Bug from Test Sheet - Already Fixed

### Fixed Bugs:
‚úÖ **Bug #1**: Business ID shows in form
   - **Fix**: Removed from UI, auto-generated by database

‚úÖ **Bug #2**: Product modal shows last product data
   - **Fix**: Form resets when opening create modal

### Remaining Bugs (Documented):
üìù All 40+ bugs from your test sheet are documented in:
   - `COMPREHENSIVE_BUG_FIXES.md`
   - Each bug has priority level
   - Each bug has fix requirements
   - Implementation roadmap included

---

## Quick Testing

### Test Bug Report:
1. Go to Bug Management
2. Click "Report Bug"
3. Enter:
   - Title: "Test Bug Report"
   - Description: "Testing the bug tracking system"
   - Expected: "System should work"
   - Actual: "Testing in progress"
   - User Type: Admin
   - Module: Other
   - Priority: Low
4. Add screenshot (optional)
5. Submit

### Verify:
- Bug appears in list
- Stats update correctly
- Can assign to employee
- Can change status
- Can filter and search

---

## Integration with Existing System

### Notifications:
```typescript
// When bug is assigned, create notification:
await supabase.from('notifications').insert({
  user_id: employee_id,
  type: 'bug_assignment',
  title: 'New Bug Assigned',
  message: `Bug "${bug.title}" has been assigned to you`,
  read: false
});
```

### Employee Dashboard:
```typescript
// Show assigned bugs count:
const { count } = await supabase
  .from('bugs')
  .select('*', { count: 'exact', head: true })
  .eq('assigned_employee_id', user.id)
  .in('status', ['pending', 'in-progress']);
```

---

## Database Schema Quick Reference

### bugs table:
- id (uuid)
- user_type (admin/business/employee)
- title (text)
- description (text)
- expected_behaviour (text)
- actual_behaviour (text)
- screenshots (text[])
- module (text)
- status (pending/in-progress/resolved/rejected/reopened)
- priority (low/medium/high/critical)
- assigned_employee_id (uuid)
- testing_person (text)
- reported_by (uuid)
- business_id (uuid)
- created_at, updated_at (timestamptz)

### business_issues table:
- Similar to bugs but business-specific
- Links to products
- Has issue_type field
- Includes due_date

### employee_tasks table:
- Links to bugs or issues
- Has progress_percentage (0-100)
- Comments array (jsonb)
- Started/completed dates

---

## API Examples

### Create Bug:
```typescript
const { data, error } = await supabase
  .from('bugs')
  .insert([{
    user_type: 'admin',
    title: 'Bug title',
    description: 'Bug description',
    expected_behaviour: 'Should work',
    actual_behaviour: 'Doesn't work',
    module: 'Product Management',
    priority: 'high',
    status: 'pending',
    screenshots: ['base64_image_1', 'base64_image_2']
  }])
  .select()
  .single();
```

### Get Bugs:
```typescript
const { data: bugs } = await supabase
  .from('bugs')
  .select('*')
  .order('created_at', { ascending: false });
```

### Update Status:
```typescript
await supabase
  .from('bugs')
  .update({ status: 'resolved', resolved_date: new Date() })
  .eq('id', bugId);
```

### Assign to Employee:
```typescript
await supabase
  .from('bugs')
  .update({ assigned_employee_id: employeeId })
  .eq('id', bugId);
```

---

## Troubleshooting

### Migration Fails:
- Check Supabase connection
- Verify table names don't exist
- Check for syntax errors

### Component Not Showing:
- Verify import path
- Check navigation configuration
- Ensure user has admin role

### Images Not Uploading:
- Check file size limit (5MB default)
- Verify base64 encoding
- Check array handling

### RLS Blocking Access:
- Verify policies are created
- Check user authentication
- Review business_id matching

---

## Support & Documentation

### Full Documentation:
- `COMPREHENSIVE_BUG_FIXES.md` - All 40+ bugs listed
- `BUG_FIX_SUMMARY.md` - Implementation summary
- `README.md` - Platform overview

### Component Files:
- `src/components/Admin/BugManagement.tsx` - Main UI
- `supabase/migrations/20251118120000_create_bug_tracking_system.sql` - Database

---

## Next Actions

1. ‚úÖ Apply database migration
2. ‚úÖ Add to navigation
3. ‚úÖ Test bug reporting
4. ‚úÖ Assign bugs to employees
5. ‚úÖ Track resolution progress
6. üìã Fix remaining bugs from checklist
7. üìã Implement business issues component
8. üìã Create employee task dashboard
9. üìã Add email notifications
10. üìã Complete all HIGH priority fixes

---

**System Status**: ‚úÖ Ready to Deploy
**Database**: ‚úÖ Schema Created
**UI**: ‚úÖ Component Built
**Documentation**: ‚úÖ Complete

Start using the bug tracking system immediately!
